import{b as I,a as W,r as o,s as f,j as e}from"./index-ByQWjG9P.js";import{E as A,G as B}from"./index.esm-Bscq3nrx.js";const E=()=>{const{id:n}=I(),l=W(),m=!!n,[g,p]=o.useState(!1),[a,j]=o.useState({title:"",type:"movie",status:"published",description:"",category:"",year:new Date().getFullYear(),rating:"",duration:"",language:"English",country:"USA",frontImage:"",backImage:"",watchLink:"",featured:!1,isNewRelease:!1,isPopular:!1,cast:[],director:"",seasons:[]}),[v,x]=o.useState(""),[w,u]=o.useState(""),[k,h]=o.useState("");o.useEffect(()=>{m&&C()},[n]);const C=async()=>{p(!0);const{data:t,error:i}=await f.from("movies").select("*").eq("id",n).single();i?(console.error("Error fetching content:",i),l("/admin/content")):(j(t),Array.isArray(t.cast)?x(t.cast.join(", ")):typeof t.cast=="string"&&x(t.cast),Array.isArray(t.writers)?u(t.writers.join(", ")):typeof t.writers=="string"&&u(t.writers),Array.isArray(t.awards)?h(t.awards.join(", ")):typeof t.awards=="string"&&h(t.awards)),p(!1)},s=t=>{const{name:i,value:y,type:b,checked:c}=t.target;j(d=>({...d,[i]:b==="checkbox"?c:y}))},R=async t=>{t.preventDefault(),p(!0);try{const i=v.split(",").map(r=>r.trim()).filter(r=>r),y=w.split(",").map(r=>r.trim()).filter(r=>r),b=k.split(",").map(r=>r.trim()).filter(r=>r),c={...a,cast:i,writers:y,awards:b,updated_at:new Date().toISOString()};let d;if(m){const{error:r}=await f.from("movies").update(c).eq("id",n);d=r}else{const{error:r}=await f.from("movies").insert([c]);d=r}if(d)throw d;l("/admin/content")}catch(i){console.error("Error saving content:",i),alert("Error saving content: "+i.message)}finally{p(!1)}};return e.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",background:"white",padding:"2rem",borderRadius:"15px",boxShadow:"0 5px 20px rgba(0,0,0,0.05)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[e.jsxs("button",{onClick:()=>l("/admin/content"),style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",color:"#666"},children:[e.jsx(A,{})," Back to List"]}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#333"},children:m?"Edit Content":"Add New Content"})]}),e.jsxs("form",{onSubmit:R,style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Title"}),e.jsx("input",{type:"text",name:"title",value:a.title,onChange:s,required:!0,style:{width:"100%",padding:"0.7rem",borderRadius:"6px",border:"1px solid #ddd"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Type"}),e.jsxs("select",{name:"type",value:a.type||"movie",onChange:s,style:{width:"100%",padding:"0.7rem",borderRadius:"6px",border:"1px solid #ddd"},children:[e.jsx("option",{value:"movie",children:"Movie"}),e.jsx("option",{value:"series",children:"Series"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Front Image URL (Poster)"}),e.jsx("input",{type:"text",name:"frontImage",value:a.frontImage,onChange:s,placeholder:"https://...",style:{width:"100%",padding:"0.7rem",borderRadius:"6px",border:"1px solid #ddd"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Backdrop Image URL (Landscape)"}),e.jsx("input",{type:"text",name:"backImage",value:a.backImage||"",onChange:s,placeholder:"https://...",style:{width:"100%",padding:"0.7rem",borderRadius:"6px",border:"1px solid #ddd"}})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Carousel Hero Image URL (Optional)"}),e.jsx("small",{style:{display:"block",marginBottom:"0.5rem",color:"#666"},children:"Specific image for the top slider. Falls back to Backdrop if empty."}),e.jsx("input",{type:"text",name:"carouselImage",value:a.carouselImage||"",onChange:s,placeholder:"https://...",style:{width:"100%",padding:"0.7rem",borderRadius:"6px",border:"1px solid #ddd"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Description"}),e.jsx("textarea",{name:"description",value:a.description,onChange:s,rows:"4",style:{width:"100%",padding:"0.7rem",borderRadius:"6px",border:"1px solid #ddd"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Cast (comma separated)"}),e.jsx("input",{type:"text",value:v,onChange:t=>x(t.target.value),placeholder:"Actor 1, Actor 2...",style:{width:"100%",padding:"0.7rem",borderRadius:"6px",border:"1px solid #ddd"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Writers (comma separated)"}),e.jsx("input",{type:"text",value:w,onChange:t=>u(t.target.value),placeholder:"Writer 1, Writer 2...",style:{width:"100%",padding:"0.7rem",borderRadius:"6px",border:"1px solid #ddd"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Awards (comma separated)"}),e.jsx("input",{type:"text",value:k,onChange:t=>h(t.target.value),placeholder:"Award 1, Award 2...",style:{width:"100%",padding:"0.7rem",borderRadius:"6px",border:"1px solid #ddd"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Category/Genre"}),e.jsx("input",{type:"text",name:"category",value:a.category,onChange:s,style:{width:"100%",padding:"0.7rem",borderRadius:"6px",border:"1px solid #ddd"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Year"}),e.jsx("input",{type:"number",name:"year",value:a.year,onChange:s,style:{width:"100%",padding:"0.7rem",borderRadius:"6px",border:"1px solid #ddd"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Rating (0-10)"}),e.jsx("input",{type:"number",step:"0.1",name:"rating",value:a.rating,onChange:s,style:{width:"100%",padding:"0.7rem",borderRadius:"6px",border:"1px solid #ddd"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Duration"}),e.jsx("input",{type:"text",name:"duration",value:a.duration,onChange:s,placeholder:"e.g. 2h 15m",style:{width:"100%",padding:"0.7rem",borderRadius:"6px",border:"1px solid #ddd"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"2rem",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",name:"featured",checked:a.featured,onChange:s})," Featured"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",name:"isPopular",checked:a.isPopular,onChange:s})," Popular"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",name:"isNewRelease",checked:a.isNewRelease,onChange:s})," New Release"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"1rem"},children:[e.jsx("button",{type:"button",onClick:()=>l("/admin/content"),style:{padding:"0.8rem 1.5rem",borderRadius:"8px",border:"1px solid #ddd",background:"white",cursor:"pointer"},children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:g,style:{padding:"0.8rem 2rem",borderRadius:"8px",border:"none",background:"#03c76c",color:"white",fontWeight:"bold",cursor:g?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(B,{})," ",g?"Saving...":"Save Content"]})]})]})]})};export{E as default};
