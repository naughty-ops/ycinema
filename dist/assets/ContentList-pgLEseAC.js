import{r as s,s as x,j as e,L as h}from"./index-ByQWjG9P.js";import{B as j,f as b,C as v,D as w}from"./index.esm-Bscq3nrx.js";const R=()=>{const[n,i]=s.useState([]),[g,l]=s.useState(!0),[a,f]=s.useState(""),[d,y]=s.useState("all");s.useEffect(()=>{u()},[]);const u=async()=>{l(!0);try{const{data:t,error:r}=await x.from("movies").select("*").order("created_at",{ascending:!1});if(r)throw r;i(t||[])}catch(t){console.error("Error fetching content:",t)}finally{l(!1)}},m=async t=>{if(window.confirm("Are you sure you want to delete this item?"))try{const{error:r}=await x.from("movies").delete().eq("id",t);if(r)throw r;i(n.filter(o=>o.id!==t))}catch(r){console.error("Error deleting item:",r),alert("Failed to delete item.")}},c=n.filter(t=>{var p;const r=(p=t.title)==null?void 0:p.toLowerCase().includes(a.toLowerCase()),o=d==="all"||t.type===d;return r&&o});return e.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"15px",boxShadow:"0 5px 20px rgba(0,0,0,0.05)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#333"},children:"Content Library"}),e.jsxs(h,{to:"/admin/content/add",style:{background:"#03c76c",color:"white",padding:"0.8rem 1.5rem",borderRadius:"8px",textDecoration:"none",display:"flex",alignItems:"center",gap:"8px",fontWeight:"500"},children:[e.jsx(j,{})," Add New"]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{position:"relative",flex:1,minWidth:"200px"},children:[e.jsx(b,{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#aaa"}}),e.jsx("input",{type:"text",placeholder:"Search by title...",value:a,onChange:t=>f(t.target.value),style:{width:"100%",padding:"0.8rem 0.8rem 0.8rem 35px",borderRadius:"8px",border:"1px solid #ddd",outline:"none"}})]}),e.jsxs("select",{value:d,onChange:t=>y(t.target.value),style:{padding:"0.8rem",borderRadius:"8px",border:"1px solid #ddd",outline:"none"},children:[e.jsx("option",{value:"all",children:"All Content"}),e.jsx("option",{value:"movie",children:"Movies"}),e.jsx("option",{value:"series",children:"Series"})]})]}),g?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:"Loading content..."}):c.length===0?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666",background:"#f9f9f9",borderRadius:"8px"},children:"No content found. Start by adding a movie or series!"}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:"800px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#f8f9fa",color:"#555",textAlign:"left"},children:[e.jsx("th",{style:{padding:"1rem",borderBottom:"2px solid #eee"},children:"Title"}),e.jsx("th",{style:{padding:"1rem",borderBottom:"2px solid #eee"},children:"Type"}),e.jsx("th",{style:{padding:"1rem",borderBottom:"2px solid #eee"},children:"Category"}),e.jsx("th",{style:{padding:"1rem",borderBottom:"2px solid #eee"},children:"Year"}),e.jsx("th",{style:{padding:"1rem",borderBottom:"2px solid #eee"},children:"Stats"}),e.jsx("th",{style:{padding:"1rem",borderBottom:"2px solid #eee"},children:"Status"}),e.jsx("th",{style:{padding:"1rem",borderBottom:"2px solid #eee",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:c.map(t=>e.jsxs("tr",{style:{borderBottom:"1px solid #eee",transition:"background 0.2s"},children:[e.jsxs("td",{style:{padding:"1rem",display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("img",{src:t.frontImage||"https://via.placeholder.com/40x60",alt:t.title,style:{width:"40px",height:"60px",objectFit:"cover",borderRadius:"4px"}}),e.jsx("span",{style:{fontWeight:"500"},children:t.title})]}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{background:t.type==="series"?"#e3f2fd":"#e8f5e9",color:t.type==="series"?"#1565c0":"#2e7d32",padding:"4px 8px",borderRadius:"4px",fontSize:"0.85rem"},children:t.type||"movie"})}),e.jsx("td",{style:{padding:"1rem",color:"#666"},children:t.category}),e.jsx("td",{style:{padding:"1rem",color:"#666"},children:t.year}),e.jsx("td",{style:{padding:"1rem",fontSize:"0.9rem"},children:e.jsxs("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:[t.rating&&e.jsxs("span",{style:{background:"#fff3cd",padding:"2px 6px",borderRadius:"4px"},children:["â­ ",t.rating]}),t.isPopular&&e.jsx("span",{style:{background:"#ffebee",color:"#c62828",padding:"2px 6px",borderRadius:"4px"},children:"Hot"}),t.isNewRelease&&e.jsx("span",{style:{background:"#e3f2fd",color:"#1565c0",padding:"2px 6px",borderRadius:"4px"},children:"New"})]})}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{color:t.status==="draft"?"#f57c00":"#2e7d32",fontWeight:"500"},children:t.status||"published"})}),e.jsx("td",{style:{padding:"1rem",textAlign:"right"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[e.jsx(h,{to:`/admin/content/edit/${t.id}`,style:{padding:"8px",background:"#f1f3f5",color:"#495057",borderRadius:"4px",border:"none",cursor:"pointer"},children:e.jsx(v,{})}),e.jsx("button",{onClick:()=>m(t.id),style:{padding:"8px",background:"#fff5f5",color:"#e03131",borderRadius:"4px",border:"none",cursor:"pointer"},children:e.jsx(w,{})})]})})]},t.id))})]})})]})};export{R as default};
