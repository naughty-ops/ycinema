import{j as e,r as m,s as T}from"./index-ByQWjG9P.js";import{F as C,a as R,b as _,c as P,d as D,e as V,f as H,g as L,h as $,i as U,j as z,k as B,l as G,m as W,n as Y,o as O,p as Q,q as E,r as J,s as N,t as q,u as K,v as X,w as Z,x as ee,y as se,z as ae}from"./index.esm-Bscq3nrx.js";const le=({results:s,query:d,onClear:n,onTitleClick:i,onPersonClick:r,onGenreClick:j})=>{const{titles:g,people:p,genres:v}=s,y=g.length>0||p.length>0||v.length>0;return d?e.jsxs("div",{className:`search-results ${d?"active":""}`,children:[e.jsxs("div",{className:"search-results-header",children:[y?e.jsxs("div",{className:"search-results-title",children:['Search Results for "',d,'"']}):e.jsx("div",{className:"search-results-title",children:"No results found"}),e.jsx("div",{className:"search-clear",onClick:n,children:"Clear"})]}),!y&&e.jsxs("div",{className:"search-no-results",children:[e.jsx(C,{style:{fontSize:"3rem",marginBottom:"1rem",opacity:.5}}),e.jsxs("h3",{children:['No results found for "',d,'"']}),e.jsx("p",{children:"Try searching for something else"})]}),g.length>0&&e.jsxs("div",{className:"search-category",children:[e.jsxs("div",{className:"search-category-title",children:[e.jsx(R,{})," Movies & TV Shows"]}),e.jsx("div",{className:"search-items",children:g.slice(0,5).map(h=>e.jsxs("div",{className:"search-item",onClick:()=>i(h),children:[e.jsx("img",{src:h.frontImage,className:"search-item-poster",alt:h.title}),e.jsxs("div",{className:"search-item-info",children:[e.jsx("div",{className:"search-item-title",children:h.title}),e.jsxs("div",{className:"search-item-meta",children:[e.jsx("span",{children:h.year}),e.jsxs("span",{className:"search-item-rating",children:[e.jsx(C,{})," ",h.rating]}),e.jsx("span",{children:h.category.split(",")[0]})]})]})]},h.id))})]}),p.length>0&&e.jsxs("div",{className:"search-category",children:[e.jsxs("div",{className:"search-category-title",children:[e.jsx(_,{})," People"]}),e.jsx("div",{className:"search-items",children:p.slice(0,5).map((h,u)=>e.jsxs("div",{className:"search-item-person",onClick:()=>r(h.name),children:[e.jsx("div",{className:"person-avatar",children:h.name.charAt(0)}),e.jsxs("div",{className:"person-info",children:[e.jsx("div",{className:"person-name",children:h.name}),e.jsx("div",{className:"person-role",children:h.role})]})]},u))})]}),v.length>0&&e.jsxs("div",{className:"search-category",children:[e.jsxs("div",{className:"search-category-title",children:[e.jsx(P,{})," Genres"]}),e.jsx("div",{className:"search-items",children:v.slice(0,5).map((h,u)=>e.jsx("div",{className:"search-item",onClick:()=>j(h.name),children:e.jsxs("div",{className:"search-item-info",children:[e.jsx("div",{className:"search-item-title",children:h.name}),e.jsxs("div",{className:"search-item-meta",children:["Browse all ",h.name," titles"]})]})},u))})]})]}):null},ie=({onSearch:s,onVoiceSearch:d,searchResults:n,onMovieSelect:i})=>{const[r,j]=m.useState(!1),[g,p]=m.useState(""),[v,y]=m.useState(!1),[h,u]=m.useState(!1),k=m.useRef(null);m.useEffect(()=>{const o=()=>{j(window.scrollY>50)};return window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[]),m.useEffect(()=>{const o=w=>{k.current&&!k.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]);const S=o=>{const w=o.target.value;p(w),s(w),u(!0)},F=o=>{o&&o.preventDefault(),s(g),u(!0)},I=()=>{y(!v),d()},M=()=>{p(""),s(""),u(!1)};return e.jsxs("header",{id:"navbar",className:r?"scrolled":"",children:[e.jsxs("div",{className:"logo",children:[e.jsx(D,{}),"yCINEMA"]}),e.jsxs("div",{className:"header-search-container",ref:k,children:[e.jsxs("form",{className:"header-search-bar",onSubmit:F,children:[e.jsx("input",{type:"text",id:"header-search-input",className:"header-search-input",placeholder:"Search movies, TV shows, actors...",value:g,onChange:S,onFocus:()=>u(!0)}),e.jsxs("div",{className:"header-search-actions",children:[e.jsx("button",{type:"button",className:`header-voice-search ${v?"listening":""}`,id:"header-voice-search",title:"Voice Search",onClick:I,children:e.jsx(V,{})}),e.jsx("button",{type:"submit",className:"header-search-btn",id:"header-search-btn",children:e.jsx(H,{})})]})]}),h&&n&&e.jsx(le,{results:n,query:g,onClear:M,onTitleClick:o=>{console.log("Clicked movie",o.title),u(!1),i&&i(o)},onPersonClick:o=>{console.log("Clicked person",o),u(!1),p(o),s(o)},onGenreClick:o=>{console.log("Clicked genre",o),u(!1),p(o),s(o)}})]}),e.jsx("div",{className:"nav-container",children:e.jsxs("div",{className:"nav-links",children:[e.jsx("a",{href:"#",className:"nav-link active",children:"Home"}),e.jsx("a",{href:"#",className:"nav-link",children:"Movies"}),e.jsx("a",{href:"#",className:"nav-link",children:"TV Shows"}),e.jsx("a",{href:"#",className:"nav-link",children:"My List"})]})})]})},re=({movies:s})=>{const[d,n]=m.useState(0);return m.useEffect(()=>{if(!s||s.length===0)return;const i=setInterval(()=>{n(r=>(r+1)%s.length)},5e3);return()=>clearInterval(i)},[s]),!s||s.length===0?null:e.jsxs("div",{className:"hero-container",id:"hero-container",children:[e.jsx("div",{className:"hero",children:s.map((i,r)=>e.jsxs("div",{className:`hero-slide ${r===d?"active":""}`,style:{backgroundImage:`url(${i.carouselImage||i.backImage})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("img",{src:i.carouselImage||i.backImage,className:"hero-backdrop",alt:i.title}),e.jsxs("div",{className:"hero-content",children:[e.jsx("span",{className:"hero-badge",children:"Featured"}),e.jsx("h1",{className:"hero-title",children:i.title}),e.jsxs("div",{className:"hero-meta",children:[e.jsx("span",{children:i.year}),e.jsx("span",{children:i.duration}),e.jsx("span",{children:i.rating})]}),e.jsx("p",{className:"hero-description",children:i.description}),e.jsxs("div",{className:"hero-actions",children:[e.jsxs("button",{className:"btn btn-primary",children:[e.jsx(L,{})," Watch Now"]}),e.jsxs("button",{className:"btn btn-secondary",children:[e.jsx($,{})," More Info"]})]})]})]},i.id))}),e.jsx("div",{className:"hero-indicators",id:"hero-indicators",children:s.map((i,r)=>e.jsx("div",{className:`hero-indicator ${r===d?"active":""}`,onClick:()=>n(r)},r))})]})},te=[{id:"all",label:"Trending",icon:U},{id:"action",label:"Action",icon:z},{id:"drama",label:"Drama",icon:B},{id:"comedy",label:"Comedy",icon:G},{id:"thriller",label:"Thriller",icon:W},{id:"new",label:"New Releases",icon:C},{id:"popular",label:"Popular",icon:Y},{id:"top10",label:"Top 10",icon:O},{id:"revenge",label:"Revenge",icon:Q},{id:"inspirational",label:"Inspirational",icon:E},{id:"horror",label:"Horror",icon:J}],ce=({activeCategory:s,onSelectCategory:d})=>e.jsx("div",{className:"category-nav",id:"category-nav",children:te.map(n=>{const i=n.icon;return e.jsxs("div",{className:`category-item ${s===n.id?"active":""}`,"data-category":n.id,onClick:()=>d(n.id),children:[e.jsx(i,{})," ",n.label]},n.id)})}),A=({movie:s,onClick:d})=>{const[n,i]=m.useState(!1),r=()=>{i(!n)};return e.jsx("div",{className:"card-container",onClick:d,children:e.jsxs("div",{className:`card ${n?"flipped":""}`,onClick:j=>{j.stopPropagation(),r()},children:[e.jsxs("div",{className:"front",children:[e.jsx("img",{src:s.frontImage,alt:s.title,loading:"lazy",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"inherit"}}),e.jsx("div",{className:"title-overlay",children:s.title})]}),e.jsxs("div",{className:"back",children:[e.jsx("img",{src:s.backImage,alt:`${s.title} background`,className:"back-image",loading:"lazy"}),e.jsx("div",{className:"back-content",children:s.description}),e.jsxs("a",{href:s.watchLink,target:"_blank",rel:"noopener noreferrer",className:"watch-btn",onClick:j=>j.stopPropagation(),children:[e.jsx(L,{})," Watch Now"]})]})]})})},ne=({title:s,movies:d,onMovieClick:n,onViewAll:i})=>!d||d.length===0?null:e.jsxs("div",{className:"section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{className:"section-title",children:s}),e.jsxs("div",{className:"view-all",onClick:i,style:{cursor:"pointer"},children:["View All ",e.jsx(N,{})]})]}),e.jsx("div",{className:"movies-grid",children:d.map(r=>e.jsx(A,{movie:r,onClick:()=>n(r)},r.id))})]}),oe=()=>e.jsxs("footer",{children:[e.jsxs("div",{className:"footer-content",children:[e.jsxs("div",{className:"footer-info",children:[e.jsx("div",{className:"footer-logo",children:"yCINEMA"}),e.jsx("p",{className:"footer-description",children:"The ultimate streaming platform for movie lovers. Discover thousands of movies and TV shows, all in one place."}),e.jsxs("div",{className:"social-icons",children:[e.jsx("div",{className:"social-icon",children:e.jsx(q,{})}),e.jsx("div",{className:"social-icon",children:e.jsx(K,{})}),e.jsx("div",{className:"social-icon",children:e.jsx(X,{})}),e.jsx("div",{className:"social-icon",children:e.jsx(Z,{})}),e.jsx("div",{className:"social-icon",children:e.jsx(ee,{})})]})]}),e.jsxs("div",{className:"footer-column",children:[e.jsx("h3",{className:"footer-heading",children:"Navigation"}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{className:"footer-link",children:e.jsxs("a",{href:"#",children:[e.jsx(N,{})," Home"]})}),e.jsx("li",{className:"footer-link",children:e.jsxs("a",{href:"#",children:[e.jsx(N,{})," Movies"]})}),e.jsx("li",{className:"footer-link",children:e.jsxs("a",{href:"#",children:[e.jsx(N,{})," TV Shows"]})}),e.jsx("li",{className:"footer-link",children:e.jsxs("a",{href:"#",children:[e.jsx(N,{})," New Releases"]})})]})]}),e.jsxs("div",{className:"footer-column",children:[e.jsx("h3",{className:"footer-heading",children:"Categories"}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{className:"footer-link",children:e.jsxs("a",{href:"#",children:[e.jsx(N,{})," Action"]})}),e.jsx("li",{className:"footer-link",children:e.jsxs("a",{href:"#",children:[e.jsx(N,{})," Drama"]})}),e.jsx("li",{className:"footer-link",children:e.jsxs("a",{href:"#",children:[e.jsx(N,{})," Comedy"]})}),e.jsx("li",{className:"footer-link",children:e.jsxs("a",{href:"#",children:[e.jsx(N,{})," Thriller"]})}),e.jsx("li",{className:"footer-link",children:e.jsxs("a",{href:"#",children:[e.jsx(N,{})," Horror"]})})]})]}),e.jsxs("div",{className:"footer-column",children:[e.jsx("h3",{className:"footer-heading",children:"Support"}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{className:"footer-link",children:e.jsxs("a",{href:"#",children:[e.jsx(N,{})," Help Center"]})}),e.jsx("li",{className:"footer-link",children:e.jsxs("a",{href:"#",children:[e.jsx(N,{})," Contact Us"]})}),e.jsx("li",{className:"footer-link",children:e.jsxs("a",{href:"#",children:[e.jsx(N,{})," Devices"]})}),e.jsx("li",{className:"footer-link",children:e.jsxs("a",{href:"#",children:[e.jsx(N,{})," Terms of Use"]})})]})]})]}),e.jsxs("div",{className:"copyright",children:["Â© 2023 yCINEMA. All rights reserved. | Designed with ",e.jsx(E,{style:{color:"#e74c3c"}})," for movie lovers"]})]}),de=({movie:s,onClose:d,onWatch:n,relatedMovies:i,onRelatedClick:r})=>(m.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),s?e.jsx("div",{className:"modal",id:"detail-modal",style:{display:"flex",opacity:1,visibility:"visible"},children:e.jsxs("div",{className:"modal-content",children:[e.jsx("button",{className:"modal-close",id:"modal-close",onClick:d,children:e.jsx(se,{})}),e.jsxs("button",{className:"modal-watch-btn",id:"modal-watch-btn",onClick:n,children:[e.jsx(L,{})," Watch Now"]}),e.jsxs("div",{className:"modal-header",children:[e.jsx("img",{src:s.backImage,className:"modal-backdrop",alt:s.title}),e.jsx("img",{src:s.frontImage,className:"modal-poster",alt:s.title}),e.jsxs("div",{className:"modal-header-content",children:[e.jsx("h2",{className:"modal-title",children:s.title}),e.jsxs("div",{className:"modal-meta",children:[e.jsx("span",{className:"modal-year",children:s.year}),e.jsx("span",{className:"modal-certification",children:s.certification||"PG-13"}),e.jsx("span",{className:"modal-duration",children:s.duration}),e.jsxs("span",{className:"modal-rating",children:[e.jsx(C,{})," ",s.rating]})]})]})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{className:"modal-description",children:s.description}),e.jsxs("div",{className:"modal-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("div",{className:"detail-label",children:"Director"}),e.jsx("div",{className:"detail-value",id:"modal-director",children:s.director})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("div",{className:"detail-label",children:"Cast"}),e.jsx("div",{className:"detail-value",id:"modal-cast",children:Array.isArray(s.cast)?s.cast.join(", "):s.cast})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("div",{className:"detail-label",children:"Genre"}),e.jsx("div",{className:"detail-value",id:"modal-genre",children:s.category})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("div",{className:"detail-label",children:"Language"}),e.jsx("div",{className:"detail-value",id:"modal-language",children:s.language||"English"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("div",{className:"detail-label",children:"Awards"}),e.jsx("div",{className:"detail-value",id:"modal-awards",children:s.awards||"None"})]})]}),e.jsx("h3",{className:"modal-section-title",children:"More Like This"}),e.jsx("div",{className:"similar-movies",id:"similar-movies",children:i&&i.map(j=>e.jsx("div",{className:"similar-movie-item",onClick:()=>r&&r(j),style:{cursor:"pointer"},children:e.jsx("img",{src:j.frontImage,alt:j.title})},j.id))})]})]})}):null);function je(){const[s,d]=m.useState([]),[n,i]=m.useState([]),[r,j]=m.useState("all"),[g,p]=m.useState(null),[v,y]=m.useState({titles:[],people:[],genres:[]}),[h,u]=m.useState(!1);m.useEffect(()=>{(async()=>{try{const{data:l,error:t}=await T.from("movies").select("id, title, frontImage, backImage, carouselImage, category, rating, year, type, status, featured, isNewRelease, isPopular, top10, top10_order, created_at, cast, director, description, duration, certification, language, awards, watchLink").eq("status","published");if(t)throw t;if(l&&l.length>0){d(l);const c=l.filter(f=>f.featured);i(c.length>0?c:l.slice(0,5))}else throw console.log("No data in Supabase, fetching local."),new Error("Empty database")}catch(l){console.warn("Supabase fetch failed or empty, falling back to local JSON:",l.message),fetch("/movies.json").then(t=>t.json()).then(t=>{const c=t.movies||[];d(c);const f=c.filter(x=>x.featured);i(f.length>0?f:c.slice(0,5))}).catch(t=>console.error("Failed to fetch local movies",t))}})()},[]),m.useEffect(()=>{const a=()=>{u(window.scrollY>300)};return window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)},[]);const k=()=>{window.scrollTo({top:0,behavior:"smooth"})},S=a=>{if(!a){y({titles:[],people:[],genres:[]});return}const l=a.toLowerCase(),t={titles:[],people:[],genres:[]};s.forEach(c=>{if(c.title.toLowerCase().includes(l)&&t.titles.push(c),c.cast){let f=[];if(Array.isArray(c.cast))f=c.cast;else if(typeof c.cast=="string")try{f=JSON.parse(c.cast)}catch{f=c.cast.split(",").map(b=>b.trim())}f.forEach(x=>{x.toLowerCase().includes(l)&&(t.people.some(b=>b.name===x)||t.people.push({name:x,role:"Actor"}))})}c.director&&c.director.toLowerCase().includes(l)&&(t.people.some(f=>f.name===c.director)||t.people.push({name:c.director,role:"Director"})),c.category&&c.category.toLowerCase().includes(l)&&c.category.split(",").map(x=>x.trim()).forEach(x=>{x.toLowerCase().includes(l)&&(t.genres.some(b=>b.name===x)||t.genres.push({name:x.charAt(0).toUpperCase()+x.slice(1)}))})}),t.genres=t.genres.filter((c,f,x)=>x.findIndex(b=>b.name===c.name)===f),y(t)},F=a=>a==="new"?[...s].filter(l=>l.isNewRelease).sort((l,t)=>new Date(t.created_at||0)-new Date(l.created_at||0)).slice(0,10):a==="popular"?[...s].filter(l=>l.isPopular).sort((l,t)=>(t.rating||0)-(l.rating||0)).slice(0,10):a==="top10"?[...s].filter(l=>l.top10).sort((l,t)=>(l.top10_order||0)-(t.top10_order||0)).slice(0,10):s.filter(l=>l.category&&l.category.toLowerCase().includes(a.toLowerCase())).slice(0,10),I=r==="all"?s:r==="new"?s.filter(a=>a.isNewRelease).sort((a,l)=>new Date(l.created_at||0)-new Date(a.created_at||0)):r==="popular"?s.filter(a=>a.isPopular).sort((a,l)=>(l.rating||0)-(a.rating||0)):r==="top10"?s.filter(a=>a.top10).sort((a,l)=>(a.top10_order||0)-(l.top10_order||0)):s.filter(a=>a.category&&a.category.toLowerCase().includes(r.toLowerCase())),M=a=>{if(!a)return[];const l=a.category.split(",")[0].trim().toLowerCase();return s.filter(t=>t.category.toLowerCase().includes(l)&&t.id!==a.id).slice(0,4)},[o,w]=m.useState([]);return m.useEffect(()=>{(async()=>{const{data:l}=await T.from("homepage_config").select("value").eq("key","homepage_sections").single();l&&l.value?w(l.value):w([{id:"new",title:"New Releases For You",type:"new",visible:!0},{id:"popular",title:"Popular Movies",type:"popular",visible:!0},{id:"top10",title:"Top 10 Movies This Week",type:"top10",visible:!0},{id:"action",title:"Action Movies",type:"action",visible:!0}])})()},[]),e.jsxs("div",{className:"Home",children:[e.jsx(ie,{onSearch:S,onVoiceSearch:()=>console.log("Voice search clicked"),searchResults:v,onMovieSelect:p}),e.jsx(re,{movies:n}),e.jsx(ce,{activeCategory:r,onSelectCategory:j}),e.jsx("div",{className:"main-container",children:r==="all"?e.jsx(e.Fragment,{children:o.filter(a=>a.visible).map(a=>e.jsx(ne,{title:a.title,movies:F(a.type),onMovieClick:p,onViewAll:()=>j(a.type)},a.id))}):e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:e.jsxs("h2",{className:"section-title",children:[r.charAt(0).toUpperCase()+r.slice(1)," Movies"]})}),e.jsx("div",{className:"movies-grid",children:I.map(a=>e.jsx(A,{movie:a,onClick:()=>p(a)},a.id))})]})}),g&&e.jsx(de,{movie:g,onClose:()=>p(null),relatedMovies:M(g)}),e.jsx(oe,{}),e.jsx("button",{className:`back-to-top ${h?"visible":""}`,id:"back-to-top",onClick:k,children:e.jsx(ae,{})})]})}export{je as default};
