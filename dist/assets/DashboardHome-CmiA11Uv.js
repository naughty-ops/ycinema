import{r as l,s,j as e,L as c}from"./index-ByQWjG9P.js";import{a as u,P as j,Q as b,R as v}from"./index.esm-Bscq3nrx.js";const C=()=>{const[r,a]=l.useState({totalMovies:0,totalSeries:0,totalContent:0,recentItems:[]}),[n,o]=l.useState(!0);l.useEffect(()=>{i()},[]);const i=async()=>{try{const{count:t,error:x}=await s.from("movies").select("*",{count:"exact",head:!0}),{count:h,error:p}=await s.from("movies").select("*",{count:"exact",head:!0}).eq("type","movie"),{count:m,error:f}=await s.from("movies").select("*",{count:"exact",head:!0}).eq("type","series"),{data:g,error:y}=await s.from("movies").select("id, title, type, created_at, category, status").order("created_at",{ascending:!1}).limit(5);if(x||p||f||y)throw new Error("Failed to fetch stats");a({totalMovies:h||0,totalSeries:m||0,totalContent:t||0,recentItems:g||[]})}catch(t){console.error("Error fetching dashboard stats:",t)}finally{o(!1)}};return n?e.jsx("div",{style:{padding:"2rem"},children:"Loading dashboard..."}):e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[e.jsx("h1",{style:{marginBottom:"2rem",fontSize:"1.8rem",color:"#333"},children:"Dashboard Overview"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.5rem",marginBottom:"3rem"},children:[e.jsx(d,{icon:e.jsx(u,{}),title:"Total Movies",value:r.totalMovies,color:"#3498db",link:"/admin/content"}),e.jsx(d,{icon:e.jsx(j,{}),title:"Total Series",value:r.totalSeries,color:"#9b59b6",link:"/admin/content"}),e.jsx(d,{icon:e.jsx(b,{}),title:"Total Content",value:r.totalContent,color:"#03c76c",link:"/admin/content"})]}),e.jsxs("div",{style:{background:"white",borderRadius:"15px",padding:"2rem",boxShadow:"0 5px 20px rgba(0,0,0,0.05)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("h2",{style:{fontSize:"1.2rem",color:"#333",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(v,{style:{color:"#f39c12"}})," Recent Activity"]}),e.jsx(c,{to:"/admin/content",style:{color:"#03c76c",textDecoration:"none",fontWeight:"500"},children:"View All"})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid #f0f0f0",textAlign:"left"},children:[e.jsx("th",{style:{padding:"1rem",color:"#666",fontWeight:"600"},children:"Title"}),e.jsx("th",{style:{padding:"1rem",color:"#666",fontWeight:"600"},children:"Type"}),e.jsx("th",{style:{padding:"1rem",color:"#666",fontWeight:"600"},children:"Status"}),e.jsx("th",{style:{padding:"1rem",color:"#666",fontWeight:"600"},children:"Date Added"})]})}),e.jsx("tbody",{children:r.recentItems.length>0?r.recentItems.map(t=>e.jsxs("tr",{style:{borderBottom:"1px solid #f9f9f9",transition:"background 0.2s"},children:[e.jsx("td",{style:{padding:"1rem",fontWeight:"500",color:"#333"},children:t.title}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"4px 10px",borderRadius:"20px",fontSize:"0.8rem",background:t.type==="series"?"#e8f0fe":"#e6fffa",color:t.type==="series"?"#1967d2":"#02b862"},children:(t.type||"movie").toUpperCase()})}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{color:t.status==="draft"?"#f39c12":"#2ecc71",fontWeight:"500",fontSize:"0.9rem"},children:t.status?t.status.charAt(0).toUpperCase()+t.status.slice(1):"Published"})}),e.jsx("td",{style:{padding:"1rem",color:"#888",fontSize:"0.9rem"},children:new Date(t.created_at).toLocaleDateString()})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",style:{padding:"2rem",textAlign:"center",color:"#999"},children:"No content found."})})})]})})]})]})},d=({icon:r,title:a,value:n,color:o,link:i})=>e.jsx(c,{to:i||"#",style:{textDecoration:"none"},children:e.jsxs("div",{style:{background:"white",padding:"1.5rem",borderRadius:"15px",boxShadow:"0 5px 20px rgba(0,0,0,0.05)",display:"flex",alignItems:"center",gap:"1.5rem",transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer"},onMouseEnter:t=>{t.currentTarget.style.transform="translateY(-5px)",t.currentTarget.style.boxShadow="0 10px 25px rgba(0,0,0,0.1)"},onMouseLeave:t=>{t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="0 5px 20px rgba(0,0,0,0.05)"},children:[e.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:`${o}20`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",color:o},children:r}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.9rem",color:"#888",marginBottom:"5px"},children:a}),e.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#333"},children:n})]})]})});export{C as default};
